<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Driving Professional</title>
<style>
body{font-family:Arial,sans-serif;margin:0;padding:0;background:#f4f4f4;}
.hero{height:50vh;background:linear-gradient(rgba(0,0,0,.5),rgba(0,0,0,.5)),url('https://images.unsplash.com/photo-1503736334956-4c8f8e92946d?auto=format&fit=crop&w=1350&q=80');background-size:cover;background-position:center;color:white;display:flex;justify-content:center;align-items:center;text-align:center;}
.hero h1{font-size:48px;}
.hero p{font-size:20px;}
section{background:white;padding:20px;margin:20px auto;max-width:500px;border-radius:6px;}
input,button{width:100%;padding:10px;margin:5px 0;}
button{cursor:pointer;border:none;color:white;background:black;}
button.hire{background:green;margin-top:10px;}
.driver{border:1px solid #ccc;padding:10px;margin:10px 0;text-align:center;}
.driver img{width:120px;height:120px;border-radius:50%;object-fit:cover;}
</style>

<!-- Firebase SDK -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, query, where } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT.firebaseapp.com",
  projectId: "YOUR_PROJECT",
  storageBucket: "YOUR_PROJECT.appspot.com",
  messagingSenderId: "YOUR_SENDER_ID",
  appId: "YOUR_APP_ID"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
</script>

</head>
<body>

<div class="hero">
  <div>
    <h1>Driving Professional</h1>
    <p>Find • Trust • Hire Professional Drivers</p>
  </div>
</div>

<section>
<h2>Login</h2>
<form id="loginForm">
<input type="text" id="loginUser" placeholder="Username" required>
<input type="password" id="loginPass" placeholder="Password" required>
<button type="submit">Login</button>
</form>
<p id="loginMsg"></p>
</section>

<section>
<h2>Driver Registration</h2>
<form id="driverForm">
<input type="text" id="username" placeholder="Username" required>
<input type="password" id="password" placeholder="Password" required>
<input type="text" id="name" placeholder="Full Name" required>
<input type="number" id="age" placeholder="Age" required>
<input type="text" id="license" placeholder="License Number" required>
<input type="text" id="experience" placeholder="Experience (years)" required>
<input type="file" id="photo" accept="image/*" required>
<button type="submit">Register Driver</button>
</form>
</section>

<section>
<h2>Available Drivers</h2>
<div id="drivers"></div>
</section>

<script type="module">
import { addDoc, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-firestore.js";

// Register Driver
document.getElementById("driverForm").addEventListener("submit", function(e){
    e.preventDefault();
    const file = document.getElementById("photo").files[0];
    const reader = new FileReader();
    reader.onload = async function(){
        const driver = {
            username: document.getElementById("username").value,
            password: document.getElementById("password").value,
            name: document.getElementById("name").value,
            age: document.getElementById("age").value,
            license: document.getElementById("license").value,
            experience: document.getElementById("experience").value,
            photo: reader.result
        };
        await addDoc(collection(db, "drivers"), driver);
        alert("Driver registered successfully!");
        document.getElementById("driverForm").reset();
        showDrivers();
    }
    reader.readAsDataURL(file);
});

// Show Drivers
async function showDrivers(){
    const driversDiv = document.getElementById("drivers");
    driversDiv.innerHTML = "";
    const querySnapshot = await getDocs(collection(db, "drivers"));
    querySnapshot.forEach(doc=>{
        const d = doc.data();
        driversDiv.innerHTML += `
            <div class="driver">
                <img src="${d.photo}">
                <p><b>${d.name}</b></p>
                <p>Age: ${d.age}</p>
                <p>License: ${d.license}</p>
                <p>Experience: ${d.experience} years</p>
                <button class="hire" onclick="alert('You hired ${d.name}')">Hire Driver</button>
            </div>
        `;
    });
}

// Login
document.getElementById("loginForm").addEventListener("submit", async function(e){
    e.preventDefault();
    const u = document.getElementById("loginUser").value;
    const p = document.getElementById("loginPass").value;
    const querySnapshot = await getDocs(collection(db, "drivers"));
    let found = false;
    querySnapshot.forEach(doc=>{
        const d = doc.data();
        if(d.username===u && d.password===p) found=true;
    });
    document.getElementById("loginMsg").innerText = found ? "✅ Login successful" : "❌ Wrong credentials";
});

showDrivers();
</script>

</body>
</html>
